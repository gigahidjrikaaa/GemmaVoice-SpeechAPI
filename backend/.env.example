# ==============================================================================
# GemmaVoice Speech API - Backend Environment Template
# ==============================================================================
# Copy this file to backend/.env and adjust values for your environment.
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Service Metadata
# ------------------------------------------------------------------------------
# Human readable API title
API_TITLE=Gemma 3 API Service
# Semantic version reported by FastAPI
API_VERSION=1.0.0
# Logging level for application loggers (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO
# HTTP header used to propagate per-request IDs
REQUEST_ID_HEADER=X-Request-ID

# ------------------------------------------------------------------------------
# API Documentation (Scalar)
# ------------------------------------------------------------------------------
# Toggle Scalar UI instead of Swagger
USE_SCALAR_DOCS=true
# Path where documentation is served
DOCS_URL=/docs
# Path where the OpenAPI schema is exposed
OPENAPI_URL=/openapi.json

# ------------------------------------------------------------------------------
# Authentication & Rate Limiting
# ------------------------------------------------------------------------------
# Enable API key enforcement for REST + WebSocket
API_KEY_ENABLED=false
# Header inspected for API keys when enabled
API_KEY_HEADER_NAME=X-API-Key
# Comma-separated list of valid API keys
API_KEYS=
# Turn on global rate limiting
RATE_LIMIT_ENABLED=false
# Allowed requests per window
RATE_LIMIT_REQUESTS=120
# Length of the rolling window in seconds
RATE_LIMIT_WINDOW_SECONDS=60
# Burst multiplier applied to the base allowance
RATE_LIMIT_BURST_MULTIPLIER=1.0

# ------------------------------------------------------------------------------
# Gemma LLM & Hugging Face
# ------------------------------------------------------------------------------
# Hugging Face repository for the GGUF checkpoint
LLM_REPO_ID=bartowski/google_gemma-3-12b-it-GGUF
# Model file pulled from Hugging Face
LLM_MODEL_FILENAME=google_gemma-3-12b-it-Q4_0.gguf
# Optional HF token for private repos
HUGGING_FACE_HUB_TOKEN=
# Number of layers to place on GPU (-1 = all)
LLM_GPU_LAYERS=-1
# llama.cpp batch size
LLM_BATCH_SIZE=2048
# CPU threads for llama.cpp residual work
LLM_N_THREADS=10
# Context window forwarded to llama.cpp
LLM_CONTEXT_SIZE=32768

# ------------------------------------------------------------------------------
# Faster-Whisper (Local STT)
# ------------------------------------------------------------------------------
# Enable on-device Faster-Whisper
ENABLE_FASTER_WHISPER=true
# Checkpoint size (tiny, base, small, medium, large-v3, etc.)
FASTER_WHISPER_MODEL_SIZE=base
# Device to load the local whisper model (cuda|cpu)
FASTER_WHISPER_DEVICE=cuda
# Compute type for Faster-Whisper (float16|int8|int8_float16|float32)
FASTER_WHISPER_COMPUTE_TYPE=float16

# ------------------------------------------------------------------------------
# OpenAI Whisper (Hosted STT) - optional fallback
# ------------------------------------------------------------------------------
# OPENAI_API_KEY=
# OPENAI_API_BASE=https://api.openai.com/v1
# OPENAI_TIMEOUT_SECONDS=60
# OPENAI_WHISPER_MODEL=gpt-4o-mini-transcribe
# OPENAI_WHISPER_RESPONSE_FORMAT=verbose_json

# ------------------------------------------------------------------------------
# OpenAudio-S1 Text-to-Speech
# ------------------------------------------------------------------------------
# Base URL for the OpenAudio API service
OPENAUDIO_API_BASE=http://localhost:21251
# Optional OpenAudio API key
OPENAUDIO_API_KEY=
# REST path used for synthesis
OPENAUDIO_TTS_PATH=/v1/tts
# Default audio container requested (wav|mp3|ogg|flac)
OPENAUDIO_DEFAULT_FORMAT=wav
# Default reference ID forwarded (optional)
OPENAUDIO_DEFAULT_REFERENCE_ID=
# Enable loudness normalization
OPENAUDIO_DEFAULT_NORMALIZE=true
# Timeout (seconds) for OpenAudio HTTP requests
OPENAUDIO_TIMEOUT_SECONDS=120
# Retry attempts for recoverable OpenAudio errors
OPENAUDIO_MAX_RETRIES=3
# Default PCM sample rate used by the pipeline
DEFAULT_AUDIO_SAMPLE_RATE=16000

# ------------------------------------------------------------------------------
# Docker helper (legacy OpenAudio scripts)
# ------------------------------------------------------------------------------
REPO_URL=https://github.com/fishaudio/fish-speech.git
